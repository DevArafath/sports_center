<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart | Billiards Emporium</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="./assets/img/favicon.png">   

    <!-- Fonts CSS -->
    <link rel="stylesheet" href="./assets/css/fonts.css">

    <!-- Services & Vendor CSS -->
    <link rel="stylesheet" href="./assets/services/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/services/bootstrap-icons/bootstrap-icons.css">
    <link rel="stylesheet" href="./assets/services/fontawesome/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./assets/css/styles.css">
    <style>
        .cart-header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            padding: 15px 0;
        }
        .cart-item {
            padding: 20px 0;
            border-bottom: 1px solid #dee2e6;
        }
        .cart-item img {
            max-width: 100px;
            object-fit: cover;
        }
        .quantity-control {
            display: flex;
            align-items: center;
        }
        .quantity-control input {
            width: 50px;
            text-align: center;
        }
        .quantity-btn {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .summary-card {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }
        .checkout-btn {
            width: 100%;
            padding: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .empty-cart {
            text-align: center;
            padding: 60px 0;
        }
        .product-title {
            font-weight: 600;
        }        
        .continue-shopping {
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }
        .cart-badges .badge {
            font-size: 0.9rem;
            margin-right: 2px;
            margin-top: 2px;
        }
    </style>
</head>
<body>
    
    <!-- Page content -->
    <div class="container py-5">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">Your Shopping Cart</h1>
                <a href="#" class="continue-shopping text-dark mb-4">
                    <i class="fas fa-arrow-left me-2"></i> Continue Shopping
                </a>
            </div>
        </div>

        <div class="row mt-3">
            <!-- Cart Items (left) -->
            <div class="col-lg-8">
                <div class="card shadow-sm mb-4">
                    <div class="card-body p-0">
                        <div class="cart-header d-none d-md-flex">
                            <div class="row w-100 px-3">
                                <div class="col-md-6">Product</div>
                                <div class="col-md-2 text-center">Price</div>
                                <div class="col-md-2 text-center">Quantity</div>
                                <div class="col-md-2 text-center">Total</div>
                            </div>
                        </div>

                        <div id="cart-items-container">
                            <!-- Cart Item 1 -->
                            <div class="cart-item" data-item-id="1">
                                <div class="row align-items-center px-3">
                                    <div class="col-md-6">
                                        <div class="d-flex align-items-center">
                                            <img src="./assets/img/pool_tables.png" alt="Brunswick Pool Table" class="me-3">
                                            <div>
                                                <h5 class="product-title mb-1">Brunswick Pool Table</h5>
                                                <p class="text-muted mb-0">Professional pool table with slate bed</p>
                                                <div class="cart-badges d-md-none d-lg-none mt-2">
                                                    <span class="badge bg-secondary">Pool Tables</span>
                                                    <span class="badge bg-info">Brunswick</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-2 text-center mt-3 mt-md-0">
                                        <span class="d-md-none">Price: </span>
                                        <span class="fw-bold item-price">1299.99</span>
                                    </div>
                                    <div class="col-6 col-md-2 text-center mt-3 mt-md-0">
                                        <div class="quantity-control justify-content-center">
                                            <button class="btn btn-sm btn-outline-secondary quantity-btn minus-btn">-</button>
                                            <input type="number" min="1" value="1" class="form-control mx-2 item-quantity">
                                            <button class="btn btn-sm btn-outline-secondary quantity-btn plus-btn">+</button>
                                        </div>
                                    </div>
                                    <div class="col-md-2 text-center mt-3 mt-md-0 d-flex justify-content-between align-items-center">
                                        <span class="d-md-none">Total: </span>
                                        <span class="fw-bold item-total">$1,299.99</span>
                                        <button class="btn btn-link text-danger ms-2 remove-item">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Cart Item 2 -->
                            <div class="cart-item" data-item-id="2">
                                <div class="row align-items-center px-3">
                                    <div class="col-md-6">
                                        <div class="d-flex align-items-center">
                                            <img src="./assets/img/pool_tables.png" alt="Riley Folding Pool Table" class="me-3">
                                            <div>
                                                <h5 class="product-title mb-1">Riley Folding Pool Table</h5>
                                                <p class="text-muted mb-0">Space-saving folding pool table</p>
                                                <div class="cart-badges d-md-none d-lg-none mt-2">
                                                    <span class="badge bg-secondary">Pool Tables</span>
                                                    <span class="badge bg-info">Riley</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-2 text-center mt-3 mt-md-0">
                                        <span class="d-md-none">Price: </span>
                                        <span class="fw-bold item-price">899.99</span>
                                    </div>
                                    <div class="col-6 col-md-2 text-center mt-3 mt-md-0">
                                        <div class="quantity-control justify-content-center">
                                            <button class="btn btn-sm btn-outline-secondary quantity-btn minus-btn">-</button>
                                            <input type="number" min="1" value="1" class="form-control mx-2 item-quantity">
                                            <button class="btn btn-sm btn-outline-secondary quantity-btn plus-btn">+</button>
                                        </div>
                                    </div>
                                    <div class="col-md-2 text-center mt-3 mt-md-0 d-flex justify-content-between align-items-center">
                                        <span class="d-md-none">Total: </span>
                                        <span class="fw-bold item-total">$899.99</span>
                                        <button class="btn btn-link text-danger ms-2 remove-item">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Cart Item 3 -->
                            <div class="cart-item" data-item-id="3">
                                <div class="row align-items-center px-3">
                                    <div class="col-md-6">
                                        <div class="d-flex align-items-center">
                                            <img src="./assets/img/snooker_tables.png" alt="Riley Aristocrat Snooker Table" class="me-3">
                                            <div>
                                                <h5 class="product-title mb-1">Riley Aristocrat Snooker Table</h5>
                                                <p class="text-muted mb-0">Full-size snooker table</p>
                                                <div class="cart-badges d-md-none d-lg-none mt-2">
                                                    <span class="badge bg-secondary">Snooker Tables</span>
                                                    <span class="badge bg-info">Riley</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-2 text-center mt-3 mt-md-0">
                                        <span class="d-md-none">Price: </span>
                                        <span class="fw-bold item-price">1899.99</span>
                                    </div>
                                    <div class="col-6 col-md-2 text-center mt-3 mt-md-0">
                                        <div class="quantity-control justify-content-center">
                                            <button class="btn btn-sm btn-outline-secondary quantity-btn minus-btn">-</button>
                                            <input type="number" min="1" value="1" class="form-control mx-2 item-quantity">
                                            <button class="btn btn-sm btn-outline-secondary quantity-btn plus-btn">+</button>
                                        </div>
                                    </div>
                                    <div class="col-md-2 text-center mt-3 mt-md-0 d-flex justify-content-between align-items-center">
                                        <span class="d-md-none">Total: </span>
                                        <span class="fw-bold item-total">$1,899.99</span>
                                        <button class="btn btn-link text-danger ms-2 remove-item">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional options -->
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h5 class="mb-3">Coupon Code</h5>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="coupon-code" placeholder="Enter coupon code">
                                    <button class="btn btn-outline-secondary" id="apply-coupon" type="button">Apply</button>
                                </div>
                                <div id="coupon-message" class="mt-2 small"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card shadow-sm h-100">
                            <div class="card-body d-flex flex-column">
                                <h5 class="mb-3">Shipping Method</h5>
                                <div class="form-check mb-2">
                                    <input class="form-check-input shipping-option" type="radio" name="shipping" id="standardShipping" value="25.00" checked>
                                    <label class="form-check-label d-flex justify-content-between w-100" for="standardShipping">
                                        <span>Standard Shipping (5-7 days)</span>
                                        <span>$25.00</span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input shipping-option" type="radio" name="shipping" id="expressShipping" value="45.00">
                                    <label class="form-check-label d-flex justify-content-between w-100" for="expressShipping">
                                        <span>Express Shipping (1-3 days)</span>
                                        <span>$45.00</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order Summary (right) -->
            <div class="col-lg-4 mt-4 mt-lg-0">
                <div class="summary-card sticky-top shadow-sm">
                    <h4 class="mb-4">Order Summary</h4>
                    
                    <div class="d-flex justify-content-between mb-2">
                        <span>Subtotal (<span id="items-count">3</span> items)</span>
                        <span id="subtotal">$4,099.97</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Shipping</span>
                        <span id="shipping-cost">$25.00</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Tax (7%)</span>
                        <span id="tax-amount">$287.00</span>
                    </div>
                    <div id="discount-row" class="d-flex justify-content-between mb-2 d-none">
                        <span>Discount</span>
                        <span id="discount-amount">-$0.00</span>
                    </div>
                    
                    <hr>
                    
                    <div class="d-flex justify-content-between mb-4">
                        <span class="fw-bold">Total</span>
                        <span class="fw-bold fs-5" id="total-amount">$4,411.97</span>
                    </div>
                    
                    <button class="btn btn-danger checkout-btn">Proceed to Checkout</button>
                    
                    <div class="mt-3 text-center">
                        <small class="text-muted">
                            <i class="fas fa-lock me-1"></i> Secure Checkout
                        </small>
                    </div>
                    
                    <div class="mt-3 d-flex justify-content-center">
                        <img src="/api/placeholder/240/40" alt="Payment methods" class="img-fluid">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Services & Vendor JS -->
    <script src="./assets/services/jQuery_v3.7.1/jquery-3.7.1.min.js"></script>
    <script src="./assets/services/bootstrap/bootstrap.bundle.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tax rate
            const TAX_RATE = 0.07;
            
            // Available coupon codes
            const COUPON_CODES = {
                'WELCOME10': 0.10,  // 10% off
                'SPRING25': 0.25,   // 25% off
                'FREESHIP': 'freeshipping' // Free shipping
            };
            
            // Track current discount
            let currentDiscount = {
                type: null,
                value: 0
            };
            
            // Initialize the cart
            updateCartTotals();
            
            // Quantity buttons
            const minusBtns = document.querySelectorAll('.minus-btn');
            const plusBtns = document.querySelectorAll('.plus-btn');
            const quantityInputs = document.querySelectorAll('.item-quantity');
            
            // Minus button functionality
            minusBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const input = this.nextElementSibling;
                    let value = parseInt(input.value);
                    if (value > 1) {
                        input.value = value - 1;
                        updateItemTotal(this.closest('.cart-item'));
                        updateCartTotals();
                    }
                });
            });
            
            // Plus button functionality
            plusBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const input = this.previousElementSibling;
                    let value = parseInt(input.value);
                    input.value = value + 1;
                    updateItemTotal(this.closest('.cart-item'));
                    updateCartTotals();
                });
            });
            
            // Quantity input change
            quantityInputs.forEach(input => {
                input.addEventListener('change', function() {
                    // Ensure value is at least 1
                    if (this.value < 1) {
                        this.value = 1;
                    }
                    updateItemTotal(this.closest('.cart-item'));
                    updateCartTotals();
                });
            });
            
            // Remove items
            const removeButtons = document.querySelectorAll('.remove-item');
            removeButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const cartItem = this.closest('.cart-item');
                    cartItem.remove();
                    updateCartTotals();
                    
                    // Check if cart is empty
                    const cartItems = document.querySelectorAll('.cart-item');
                    if (cartItems.length === 0) {
                        const cartContainer = document.getElementById('cart-items-container');
                        cartContainer.innerHTML = '<div class="empty-cart"><p>Your cart is empty</p><a href="#" class="btn btn-primary">Continue Shopping</a></div>';
                    }
                });
            });
            
            // Shipping options
            const shippingOptions = document.querySelectorAll('.shipping-option');
            shippingOptions.forEach(option => {
                option.addEventListener('change', function() {
                    updateCartTotals();
                });
            });
            
            // Coupon code application
            const couponButton = document.getElementById('apply-coupon');
            const couponInput = document.getElementById('coupon-code');
            const couponMessage = document.getElementById('coupon-message');
            
            couponButton.addEventListener('click', function() {
                const code = couponInput.value.trim().toUpperCase();
                
                // Reset previous coupon message
                couponMessage.textContent = '';
                couponMessage.className = 'mt-2 small';
                
                // If empty input
                if (!code) {
                    couponMessage.textContent = 'Please enter a coupon code';
                    couponMessage.classList.add('text-danger');
                    return;
                }
                
                // Check if valid coupon
                if (COUPON_CODES.hasOwnProperty(code)) {
                    const discountValue = COUPON_CODES[code];
                    
                    // Handle percentage discount
                    if (typeof discountValue === 'number') {
                        currentDiscount.type = 'percentage';
                        currentDiscount.value = discountValue;
                        couponMessage.textContent = `${discountValue * 100}% discount applied!`;
                        couponMessage.classList.add('text-success');
                    } 
                    // Handle free shipping
                    else if (discountValue === 'freeshipping') {
                        currentDiscount.type = 'freeshipping';
                        currentDiscount.value = 0;
                        couponMessage.textContent = 'Free shipping applied!';
                        couponMessage.classList.add('text-success');
                    }
                    
                    // Show discount row and update totals
                    document.getElementById('discount-row').classList.remove('d-none');
                    updateCartTotals();
                    
                } else {
                    couponMessage.textContent = 'Invalid coupon code';
                    couponMessage.classList.add('text-danger');
                    
                    // Reset discount
                    currentDiscount.type = null;
                    currentDiscount.value = 0;
                    document.getElementById('discount-row').classList.add('d-none');
                    updateCartTotals();
                }
            });
            
            // Function to update individual item total
            function updateItemTotal(cartItem) {
                const priceElement = cartItem.querySelector('.item-price');
                const quantityElement = cartItem.querySelector('.item-quantity');
                const totalElement = cartItem.querySelector('.item-total');
                
                const price = parseFloat(priceElement.textContent);
                const quantity = parseInt(quantityElement.value);
                const total = price * quantity;
                
                totalElement.textContent = formatCurrency(total);
            }
            
            // Function to update all cart totals
            function updateCartTotals() {
                // Get all items
                const cartItems = document.querySelectorAll('.cart-item');
                const itemsCount = cartItems.length;
                document.getElementById('items-count').textContent = itemsCount;
                
                // Calculate subtotal
                let subtotal = 0;
                cartItems.forEach(item => {
                    const priceElement = item.querySelector('.item-price');
                    const quantityElement = item.querySelector('.item-quantity');
                    
                    const price = parseFloat(priceElement.textContent);
                    const quantity = parseInt(quantityElement.value);
                    
                    subtotal += price * quantity;
                });
                
                // Get selected shipping cost
                let shippingCost = 25.00; // Default
                document.querySelectorAll('.shipping-option').forEach(option => {
                    if (option.checked) {
                        shippingCost = parseFloat(option.value);
                    }
                });
                
                // Apply free shipping if applicable
                if (currentDiscount.type === 'freeshipping') {
                    shippingCost = 0;
                }
                
                // Calculate discount amount
                let discountAmount = 0;
                if (currentDiscount.type === 'percentage') {
                    discountAmount = subtotal * currentDiscount.value;
                    document.getElementById('discount-amount').textContent = '-' + formatCurrency(discountAmount);
                }
                
                // Calculate tax (on the discounted subtotal)
                const taxableAmount = subtotal - discountAmount;
                const taxAmount = taxableAmount * TAX_RATE;
                
                // Calculate total
                const total = taxableAmount + taxAmount + shippingCost;
                
                // Update display
                document.getElementById('subtotal').textContent = formatCurrency(subtotal);
                document.getElementById('shipping-cost').textContent = formatCurrency(shippingCost);
                document.getElementById('tax-amount').textContent = formatCurrency(taxAmount);
                document.getElementById('total-amount').textContent = formatCurrency(total);
            }
            
            // Helper function to format currency
            function formatCurrency(amount) {
                return '$' + amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
            }
        });
    </script>
</body>
</html>